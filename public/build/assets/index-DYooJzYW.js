import{r as n,j as e,b as Ae,y as xt}from"./app-gBC5v1MW.js";import{c as Me,a as gt,h as St,u as wt,R as yt,F as Ct,D as bt,C as Nt,b as It,V as Tt,d as jt,P as Pt,A as Rt}from"./AppLayout-BFmSwg2L.js";import Et from"./BookCard-DDw17yx-.js";import _t from"./LayoutToggle-iM-nM3MT.js";import{L as At,I as Mt}from"./label-DUKVbg5U.js";import{u as Ot,C as Dt}from"./checkbox-DPpUt3lT.js";import{u as L,S as Lt,B as kt}from"./button-C6ykpAO9.js";import{C as Bt,a as Vt,b as Ht,c as Ft}from"./react-icons.esm-NH-H7jJz.js";import{c as Ut,b as P,d as W,e as Wt,a as Pe}from"./use-toast-BRpWx_E5.js";import{f as Kt,a as Te,u as $t}from"./settings-DRpGdY7K.js";import{P as A}from"./index-DCFaf2iv.js";import{c as K}from"./utils-DnNDQBbQ.js";import{C as Gt,b as zt,c as Yt,a as qt}from"./card-RqXhXCks.js";import"./badge-CFTqj2o-.js";import"./createLucideIcon-C4HAQVrX.js";import"./ApplicationLogo-Dp7q7gti.js";function Re(o,[r,t]){return Math.min(t,Math.max(r,o))}var Xt=[" ","Enter","ArrowUp","ArrowDown"],Zt=[" ","Enter"],ae="Select",[de,ue,Jt]=Kt(ae),[oe,Fo]=Ut(ae,[Jt,Me]),pe=Me(),[Qt,$]=oe(ae),[eo,to]=oe(ae),Oe=o=>{const{__scopeSelect:r,children:t,open:a,defaultOpen:l,onOpenChange:u,value:c,defaultValue:i,onValueChange:s,dir:p,name:x,autoComplete:g,disabled:T,required:I}=o,d=pe(r),[h,C]=n.useState(null),[v,f]=n.useState(null),[S,V]=n.useState(!1),M=$t(p),[ne=!1,R]=Pe({prop:a,defaultProp:l,onChange:u}),[_,z]=Pe({prop:c,defaultProp:i,onChange:s}),J=n.useRef(null),Y=h?!!h.closest("form"):!0,[O,H]=n.useState(new Set),F=Array.from(O).map(j=>j.props.value).join(";");return e.jsx(jt,{...d,children:e.jsxs(Qt,{required:I,scope:r,trigger:h,onTriggerChange:C,valueNode:v,onValueNodeChange:f,valueNodeHasChildren:S,onValueNodeHasChildrenChange:V,contentId:Te(),value:_,onValueChange:z,open:ne,onOpenChange:R,dir:M,triggerPointerDownPosRef:J,disabled:T,children:[e.jsx(de.Provider,{scope:r,children:e.jsx(eo,{scope:o.__scopeSelect,onNativeOptionAdd:n.useCallback(j=>{H(D=>new Set(D).add(j))},[]),onNativeOptionRemove:n.useCallback(j=>{H(D=>{const k=new Set(D);return k.delete(j),k})},[]),children:t})}),Y?e.jsxs(st,{"aria-hidden":!0,required:I,tabIndex:-1,name:x,autoComplete:g,value:_,onChange:j=>z(j.target.value),disabled:T,children:[_===void 0?e.jsx("option",{value:""}):null,Array.from(O)]},F):null]})})};Oe.displayName=ae;var De="SelectTrigger",Le=n.forwardRef((o,r)=>{const{__scopeSelect:t,disabled:a=!1,...l}=o,u=pe(t),c=$(De,t),i=c.disabled||a,s=L(r,c.onTriggerChange),p=ue(t),[x,g,T]=at(d=>{const h=p().filter(f=>!f.disabled),C=h.find(f=>f.value===c.value),v=lt(h,d,C);v!==void 0&&c.onValueChange(v.value)}),I=()=>{i||(c.onOpenChange(!0),T())};return e.jsx(gt,{asChild:!0,...u,children:e.jsx(A.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":rt(c.value)?"":void 0,...l,ref:s,onClick:P(l.onClick,d=>{d.currentTarget.focus()}),onPointerDown:P(l.onPointerDown,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&h.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&(I(),c.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)},d.preventDefault())}),onKeyDown:P(l.onKeyDown,d=>{const h=x.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&g(d.key),!(h&&d.key===" ")&&Xt.includes(d.key)&&(I(),d.preventDefault())})})})});Le.displayName=De;var ke="SelectValue",Be=n.forwardRef((o,r)=>{const{__scopeSelect:t,className:a,style:l,children:u,placeholder:c="",...i}=o,s=$(ke,t),{onValueNodeHasChildrenChange:p}=s,x=u!==void 0,g=L(r,s.onValueNodeChange);return W(()=>{p(x)},[p,x]),e.jsx(A.span,{...i,ref:g,style:{pointerEvents:"none"},children:rt(s.value)?e.jsx(e.Fragment,{children:c}):u})});Be.displayName=ke;var oo="SelectIcon",Ve=n.forwardRef((o,r)=>{const{__scopeSelect:t,children:a,...l}=o;return e.jsx(A.span,{"aria-hidden":!0,...l,ref:r,children:a||"â–¼"})});Ve.displayName=oo;var no="SelectPortal",He=o=>e.jsx(Pt,{asChild:!0,...o});He.displayName=no;var Z="SelectContent",Fe=n.forwardRef((o,r)=>{const t=$(Z,o.__scopeSelect),[a,l]=n.useState();if(W(()=>{l(new DocumentFragment)},[]),!t.open){const u=a;return u?Ae.createPortal(e.jsx(Ue,{scope:o.__scopeSelect,children:e.jsx(de.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),u):null}return e.jsx(We,{...o,ref:r})});Fe.displayName=Z;var B=10,[Ue,G]=oe(Z),ro="SelectContentImpl",We=n.forwardRef((o,r)=>{const{__scopeSelect:t,position:a="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,side:i,sideOffset:s,align:p,alignOffset:x,arrowPadding:g,collisionBoundary:T,collisionPadding:I,sticky:d,hideWhenDetached:h,avoidCollisions:C,...v}=o,f=$(Z,t),[S,V]=n.useState(null),[M,ne]=n.useState(null),R=L(r,m=>V(m)),[_,z]=n.useState(null),[J,Y]=n.useState(null),O=ue(t),[H,F]=n.useState(!1),j=n.useRef(!1);n.useEffect(()=>{if(S)return St(S)},[S]),wt();const D=n.useCallback(m=>{const[N,...E]=O().map(y=>y.ref.current),[b]=E.slice(-1),w=document.activeElement;for(const y of m)if(y===w||(y==null||y.scrollIntoView({block:"nearest"}),y===N&&M&&(M.scrollTop=0),y===b&&M&&(M.scrollTop=M.scrollHeight),y==null||y.focus(),document.activeElement!==w))return},[O,M]),k=n.useCallback(()=>D([_,S]),[D,_,S]);n.useEffect(()=>{H&&k()},[H,k]);const{onOpenChange:Q,triggerPointerDownPosRef:U}=f;n.useEffect(()=>{if(S){let m={x:0,y:0};const N=b=>{var w,y;m={x:Math.abs(Math.round(b.pageX)-(((w=U.current)==null?void 0:w.x)??0)),y:Math.abs(Math.round(b.pageY)-(((y=U.current)==null?void 0:y.y)??0))}},E=b=>{m.x<=10&&m.y<=10?b.preventDefault():S.contains(b.target)||Q(!1),document.removeEventListener("pointermove",N),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",N),document.addEventListener("pointerup",E,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",E,{capture:!0})}}},[S,Q,U]),n.useEffect(()=>{const m=()=>Q(!1);return window.addEventListener("blur",m),window.addEventListener("resize",m),()=>{window.removeEventListener("blur",m),window.removeEventListener("resize",m)}},[Q]);const[fe,le]=at(m=>{const N=O().filter(w=>!w.disabled),E=N.find(w=>w.ref.current===document.activeElement),b=lt(N,m,E);b&&setTimeout(()=>b.ref.current.focus())}),me=n.useCallback((m,N,E)=>{const b=!j.current&&!E;(f.value!==void 0&&f.value===N||b)&&(z(m),b&&(j.current=!0))},[f.value]),he=n.useCallback(()=>S==null?void 0:S.focus(),[S]),ee=n.useCallback((m,N,E)=>{const b=!j.current&&!E;(f.value!==void 0&&f.value===N||b)&&Y(m)},[f.value]),ce=a==="popper"?Se:Ke,re=ce===Se?{side:i,sideOffset:s,align:p,alignOffset:x,arrowPadding:g,collisionBoundary:T,collisionPadding:I,sticky:d,hideWhenDetached:h,avoidCollisions:C}:{};return e.jsx(Ue,{scope:t,content:S,viewport:M,onViewportChange:ne,itemRefCallback:me,selectedItem:_,onItemLeave:he,itemTextRefCallback:ee,focusSelectedItem:k,selectedItemText:J,position:a,isPositioned:H,searchRef:fe,children:e.jsx(yt,{as:Lt,allowPinchZoom:!0,children:e.jsx(Ct,{asChild:!0,trapped:f.open,onMountAutoFocus:m=>{m.preventDefault()},onUnmountAutoFocus:P(l,m=>{var N;(N=f.trigger)==null||N.focus({preventScroll:!0}),m.preventDefault()}),children:e.jsx(bt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:m=>m.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:e.jsx(ce,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:m=>m.preventDefault(),...v,...re,onPlaced:()=>F(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:P(v.onKeyDown,m=>{const N=m.ctrlKey||m.altKey||m.metaKey;if(m.key==="Tab"&&m.preventDefault(),!N&&m.key.length===1&&le(m.key),["ArrowUp","ArrowDown","Home","End"].includes(m.key)){let b=O().filter(w=>!w.disabled).map(w=>w.ref.current);if(["ArrowUp","End"].includes(m.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(m.key)){const w=m.target,y=b.indexOf(w);b=b.slice(y+1)}setTimeout(()=>D(b)),m.preventDefault()}})})})})})})});We.displayName=ro;var so="SelectItemAlignedPosition",Ke=n.forwardRef((o,r)=>{const{__scopeSelect:t,onPlaced:a,...l}=o,u=$(Z,t),c=G(Z,t),[i,s]=n.useState(null),[p,x]=n.useState(null),g=L(r,R=>x(R)),T=ue(t),I=n.useRef(!1),d=n.useRef(!0),{viewport:h,selectedItem:C,selectedItemText:v,focusSelectedItem:f}=c,S=n.useCallback(()=>{if(u.trigger&&u.valueNode&&i&&p&&h&&C&&v){const R=u.trigger.getBoundingClientRect(),_=p.getBoundingClientRect(),z=u.valueNode.getBoundingClientRect(),J=v.getBoundingClientRect();if(u.dir!=="rtl"){const w=J.left-_.left,y=z.left-w,q=R.left-y,X=R.width+q,ve=Math.max(X,_.width),xe=window.innerWidth-B,ge=Re(y,[B,xe-ve]);i.style.minWidth=X+"px",i.style.left=ge+"px"}else{const w=_.right-J.right,y=window.innerWidth-z.right-w,q=window.innerWidth-R.right-y,X=R.width+q,ve=Math.max(X,_.width),xe=window.innerWidth-B,ge=Re(y,[B,xe-ve]);i.style.minWidth=X+"px",i.style.right=ge+"px"}const Y=T(),O=window.innerHeight-B*2,H=h.scrollHeight,F=window.getComputedStyle(p),j=parseInt(F.borderTopWidth,10),D=parseInt(F.paddingTop,10),k=parseInt(F.borderBottomWidth,10),Q=parseInt(F.paddingBottom,10),U=j+D+H+Q+k,fe=Math.min(C.offsetHeight*5,U),le=window.getComputedStyle(h),me=parseInt(le.paddingTop,10),he=parseInt(le.paddingBottom,10),ee=R.top+R.height/2-B,ce=O-ee,re=C.offsetHeight/2,m=C.offsetTop+re,N=j+D+m,E=U-N;if(N<=ee){const w=C===Y[Y.length-1].ref.current;i.style.bottom="0px";const y=p.clientHeight-h.offsetTop-h.offsetHeight,q=Math.max(ce,re+(w?he:0)+y+k),X=N+q;i.style.height=X+"px"}else{const w=C===Y[0].ref.current;i.style.top="0px";const q=Math.max(ee,j+h.offsetTop+(w?me:0)+re)+E;i.style.height=q+"px",h.scrollTop=N-ee+h.offsetTop}i.style.margin=`${B}px 0`,i.style.minHeight=fe+"px",i.style.maxHeight=O+"px",a==null||a(),requestAnimationFrame(()=>I.current=!0)}},[T,u.trigger,u.valueNode,i,p,h,C,v,u.dir,a]);W(()=>S(),[S]);const[V,M]=n.useState();W(()=>{p&&M(window.getComputedStyle(p).zIndex)},[p]);const ne=n.useCallback(R=>{R&&d.current===!0&&(S(),f==null||f(),d.current=!1)},[S,f]);return e.jsx(lo,{scope:t,contentWrapper:i,shouldExpandOnScrollRef:I,onScrollButtonChange:ne,children:e.jsx("div",{ref:s,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:V},children:e.jsx(A.div,{...l,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});Ke.displayName=so;var ao="SelectPopperPosition",Se=n.forwardRef((o,r)=>{const{__scopeSelect:t,align:a="start",collisionPadding:l=B,...u}=o,c=pe(t);return e.jsx(Nt,{...c,...u,ref:r,align:a,collisionPadding:l,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Se.displayName=ao;var[lo,je]=oe(Z,{}),we="SelectViewport",$e=n.forwardRef((o,r)=>{const{__scopeSelect:t,nonce:a,...l}=o,u=G(we,t),c=je(we,t),i=L(r,u.onViewportChange),s=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(de.Slot,{scope:t,children:e.jsx(A.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:i,style:{position:"relative",flex:1,overflow:"auto",...l.style},onScroll:P(l.onScroll,p=>{const x=p.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:T}=c;if(T!=null&&T.current&&g){const I=Math.abs(s.current-x.scrollTop);if(I>0){const d=window.innerHeight-B*2,h=parseFloat(g.style.minHeight),C=parseFloat(g.style.height),v=Math.max(h,C);if(v<d){const f=v+I,S=Math.min(d,f),V=f-S;g.style.height=S+"px",g.style.bottom==="0px"&&(x.scrollTop=V>0?V:0,g.style.justifyContent="flex-end")}}}s.current=x.scrollTop})})})]})});$e.displayName=we;var Ge="SelectGroup",[co,io]=oe(Ge),uo=n.forwardRef((o,r)=>{const{__scopeSelect:t,...a}=o,l=Te();return e.jsx(co,{scope:t,id:l,children:e.jsx(A.div,{role:"group","aria-labelledby":l,...a,ref:r})})});uo.displayName=Ge;var ze="SelectLabel",Ye=n.forwardRef((o,r)=>{const{__scopeSelect:t,...a}=o,l=io(ze,t);return e.jsx(A.div,{id:l.id,...a,ref:r})});Ye.displayName=ze;var ie="SelectItem",[po,qe]=oe(ie),Xe=n.forwardRef((o,r)=>{const{__scopeSelect:t,value:a,disabled:l=!1,textValue:u,...c}=o,i=$(ie,t),s=G(ie,t),p=i.value===a,[x,g]=n.useState(u??""),[T,I]=n.useState(!1),d=L(r,v=>{var f;return(f=s.itemRefCallback)==null?void 0:f.call(s,v,a,l)}),h=Te(),C=()=>{l||(i.onValueChange(a),i.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(po,{scope:t,value:a,disabled:l,textId:h,isSelected:p,onItemTextChange:n.useCallback(v=>{g(f=>f||((v==null?void 0:v.textContent)??"").trim())},[]),children:e.jsx(de.ItemSlot,{scope:t,value:a,disabled:l,textValue:x,children:e.jsx(A.div,{role:"option","aria-labelledby":h,"data-highlighted":T?"":void 0,"aria-selected":p&&T,"data-state":p?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...c,ref:d,onFocus:P(c.onFocus,()=>I(!0)),onBlur:P(c.onBlur,()=>I(!1)),onPointerUp:P(c.onPointerUp,C),onPointerMove:P(c.onPointerMove,v=>{var f;l?(f=s.onItemLeave)==null||f.call(s):v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:P(c.onPointerLeave,v=>{var f;v.currentTarget===document.activeElement&&((f=s.onItemLeave)==null||f.call(s))}),onKeyDown:P(c.onKeyDown,v=>{var S;((S=s.searchRef)==null?void 0:S.current)!==""&&v.key===" "||(Zt.includes(v.key)&&C(),v.key===" "&&v.preventDefault())})})})})});Xe.displayName=ie;var se="SelectItemText",Ze=n.forwardRef((o,r)=>{const{__scopeSelect:t,className:a,style:l,...u}=o,c=$(se,t),i=G(se,t),s=qe(se,t),p=to(se,t),[x,g]=n.useState(null),T=L(r,v=>g(v),s.onItemTextChange,v=>{var f;return(f=i.itemTextRefCallback)==null?void 0:f.call(i,v,s.value,s.disabled)}),I=x==null?void 0:x.textContent,d=n.useMemo(()=>e.jsx("option",{value:s.value,disabled:s.disabled,children:I},s.value),[s.disabled,s.value,I]),{onNativeOptionAdd:h,onNativeOptionRemove:C}=p;return W(()=>(h(d),()=>C(d)),[h,C,d]),e.jsxs(e.Fragment,{children:[e.jsx(A.span,{id:s.textId,...u,ref:T}),s.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Ae.createPortal(u.children,c.valueNode):null]})});Ze.displayName=se;var Je="SelectItemIndicator",Qe=n.forwardRef((o,r)=>{const{__scopeSelect:t,...a}=o;return qe(Je,t).isSelected?e.jsx(A.span,{"aria-hidden":!0,...a,ref:r}):null});Qe.displayName=Je;var ye="SelectScrollUpButton",et=n.forwardRef((o,r)=>{const t=G(ye,o.__scopeSelect),a=je(ye,o.__scopeSelect),[l,u]=n.useState(!1),c=L(r,a.onScrollButtonChange);return W(()=>{if(t.viewport&&t.isPositioned){let i=function(){const p=s.scrollTop>0;u(p)};const s=t.viewport;return i(),s.addEventListener("scroll",i),()=>s.removeEventListener("scroll",i)}},[t.viewport,t.isPositioned]),l?e.jsx(ot,{...o,ref:c,onAutoScroll:()=>{const{viewport:i,selectedItem:s}=t;i&&s&&(i.scrollTop=i.scrollTop-s.offsetHeight)}}):null});et.displayName=ye;var Ce="SelectScrollDownButton",tt=n.forwardRef((o,r)=>{const t=G(Ce,o.__scopeSelect),a=je(Ce,o.__scopeSelect),[l,u]=n.useState(!1),c=L(r,a.onScrollButtonChange);return W(()=>{if(t.viewport&&t.isPositioned){let i=function(){const p=s.scrollHeight-s.clientHeight,x=Math.ceil(s.scrollTop)<p;u(x)};const s=t.viewport;return i(),s.addEventListener("scroll",i),()=>s.removeEventListener("scroll",i)}},[t.viewport,t.isPositioned]),l?e.jsx(ot,{...o,ref:c,onAutoScroll:()=>{const{viewport:i,selectedItem:s}=t;i&&s&&(i.scrollTop=i.scrollTop+s.offsetHeight)}}):null});tt.displayName=Ce;var ot=n.forwardRef((o,r)=>{const{__scopeSelect:t,onAutoScroll:a,...l}=o,u=G("SelectScrollButton",t),c=n.useRef(null),i=ue(t),s=n.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return n.useEffect(()=>()=>s(),[s]),W(()=>{var x;const p=i().find(g=>g.ref.current===document.activeElement);(x=p==null?void 0:p.ref.current)==null||x.scrollIntoView({block:"nearest"})},[i]),e.jsx(A.div,{"aria-hidden":!0,...l,ref:r,style:{flexShrink:0,...l.style},onPointerDown:P(l.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(a,50))}),onPointerMove:P(l.onPointerMove,()=>{var p;(p=u.onItemLeave)==null||p.call(u),c.current===null&&(c.current=window.setInterval(a,50))}),onPointerLeave:P(l.onPointerLeave,()=>{s()})})}),fo="SelectSeparator",nt=n.forwardRef((o,r)=>{const{__scopeSelect:t,...a}=o;return e.jsx(A.div,{"aria-hidden":!0,...a,ref:r})});nt.displayName=fo;var be="SelectArrow",mo=n.forwardRef((o,r)=>{const{__scopeSelect:t,...a}=o,l=pe(t),u=$(be,t),c=G(be,t);return u.open&&c.position==="popper"?e.jsx(It,{...l,...a,ref:r}):null});mo.displayName=be;function rt(o){return o===""||o===void 0}var st=n.forwardRef((o,r)=>{const{value:t,...a}=o,l=n.useRef(null),u=L(r,l),c=Ot(t);return n.useEffect(()=>{const i=l.current,s=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(s,"value").set;if(c!==t&&x){const g=new Event("change",{bubbles:!0});x.call(i,t),i.dispatchEvent(g)}},[c,t]),e.jsx(Tt,{asChild:!0,children:e.jsx("select",{...a,ref:u,defaultValue:t})})});st.displayName="BubbleSelect";function at(o){const r=Wt(o),t=n.useRef(""),a=n.useRef(0),l=n.useCallback(c=>{const i=t.current+c;r(i),function s(p){t.current=p,window.clearTimeout(a.current),p!==""&&(a.current=window.setTimeout(()=>s(""),1e3))}(i)},[r]),u=n.useCallback(()=>{t.current="",window.clearTimeout(a.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(a.current),[]),[t,l,u]}function lt(o,r,t){const l=r.length>1&&Array.from(r).every(p=>p===r[0])?r[0]:r,u=t?o.indexOf(t):-1;let c=ho(o,Math.max(u,0));l.length===1&&(c=c.filter(p=>p!==t));const s=c.find(p=>p.textValue.toLowerCase().startsWith(l.toLowerCase()));return s!==t?s:void 0}function ho(o,r){return o.map((t,a)=>o[(r+a)%o.length])}var vo=Oe,ct=Le,xo=Be,go=Ve,So=He,it=Fe,wo=$e,dt=Ye,ut=Xe,yo=Ze,Co=Qe,pt=et,ft=tt,mt=nt;const Ee=vo,_e=xo,Ne=n.forwardRef(({className:o,children:r,...t},a)=>e.jsxs(ct,{ref:a,className:K("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o),...t,children:[r,e.jsx(go,{asChild:!0,children:e.jsx(Bt,{className:"h-4 w-4 opacity-50"})})]}));Ne.displayName=ct.displayName;const ht=n.forwardRef(({className:o,...r},t)=>e.jsx(pt,{ref:t,className:K("flex cursor-default items-center justify-center py-1",o),...r,children:e.jsx(Vt,{})}));ht.displayName=pt.displayName;const vt=n.forwardRef(({className:o,...r},t)=>e.jsx(ft,{ref:t,className:K("flex cursor-default items-center justify-center py-1",o),...r,children:e.jsx(Ht,{})}));vt.displayName=ft.displayName;const Ie=n.forwardRef(({className:o,children:r,position:t="popper",...a},l)=>e.jsx(So,{children:e.jsxs(it,{ref:l,className:K("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...a,children:[e.jsx(ht,{}),e.jsx(wo,{className:K("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(vt,{})]})}));Ie.displayName=it.displayName;const bo=n.forwardRef(({className:o,...r},t)=>e.jsx(dt,{ref:t,className:K("px-2 py-1.5 text-sm font-semibold",o),...r}));bo.displayName=dt.displayName;const te=n.forwardRef(({className:o,children:r,...t},a)=>e.jsxs(ut,{ref:a,className:K("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o),...t,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Co,{children:e.jsx(Ft,{className:"h-4 w-4"})})}),e.jsx(yo,{children:r})]}));te.displayName=ut.displayName;const No=n.forwardRef(({className:o,...r},t)=>e.jsx(mt,{ref:t,className:K("-mx-1 my-1 h-px bg-muted",o),...r}));No.displayName=mt.displayName;function Uo({books:o,genres:r}){const[t,a]=n.useState([]),[l,u]=n.useState(""),[c,i]=n.useState("grid"),[s,p]=n.useState("all"),[x,g]=n.useState("name"),T=d=>{a(h=>h.includes(d)?h.filter(C=>C!==d):[...h,d])},I=()=>{xt.get(route("book.index"),{genres:t,search:l,availability:s,sort:x},{preserveState:!0,preserveScroll:!0})};return e.jsx(Rt,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"md:w-1/4 space-y-6",children:e.jsxs(Gt,{children:[e.jsx(zt,{children:e.jsx(Yt,{children:"Filters"})}),e.jsxs(qt,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Genres"}),r.map(d=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Dt,{id:`genre-${d.id}`,checked:t.includes(d.id.toString()),onCheckedChange:()=>T(d.id.toString())}),e.jsx(At,{htmlFor:`genre-${d.id}`,children:d.name})]},d.id))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Availability"}),e.jsxs(Ee,{value:s,onValueChange:d=>p(d),children:[e.jsx(Ne,{children:e.jsx(_e,{placeholder:"Select availability"})}),e.jsxs(Ie,{children:[e.jsx(te,{value:"all",children:"All"}),e.jsx(te,{value:"available",children:"Available"}),e.jsx(te,{value:"unavailable",children:"Unavailable"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sort By"}),e.jsxs(Ee,{value:x,onValueChange:d=>g(d),children:[e.jsx(Ne,{children:e.jsx(_e,{placeholder:"Select sort option"})}),e.jsxs(Ie,{children:[e.jsx(te,{value:"name",children:"Name"}),e.jsx(te,{value:"rating",children:"Rating"})]})]})]}),e.jsx(kt,{onClick:I,className:"w-full",children:"Apply Filters"})]})]})}),e.jsxs("div",{className:"md:w-3/4 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Mt,{type:"text",placeholder:"Search books...",value:l,onChange:d=>u(d.target.value),className:"w-full max-w-sm"}),e.jsx(_t,{layout:c,setLayout:i})]}),e.jsx("div",{className:`grid gap-6 ${c==="grid"?"sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:o.map(d=>e.jsx(Et,{book:d,layout:c},d.id))})]})]})})}export{Uo as default};
