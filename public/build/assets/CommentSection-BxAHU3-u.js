import{r as x,j as e,W as b}from"./app-K2H9zMxD.js";import{C as h,a as j,b as f,d as y}from"./card-C1433V4E.js";import{B as t}from"./button-nR3dS6I0.js";import{c as C}from"./utils-DnNDQBbQ.js";const d=x.forwardRef(({className:r,...n},l)=>e.jsx("textarea",{className:C("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:l,...n}));d.displayName="Textarea";function R({bookId:r,comments:n}){const[l,o]=x.useState(null),a=b({body:"",parentId:null}),c=s=>{s.preventDefault(),a.post(route("book.comment",r),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{a.reset(),o(null)}})},m=(s,p=0)=>{var u;return e.jsxs("div",{className:`mb-4 ${p>0?"ml-8":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-semibold",children:s.createdBy.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.createdAt})]}),e.jsx("p",{className:"mt-1",children:s.body}),e.jsx(t,{variant:"link",onClick:()=>o(s.id),className:"mt-1 p-0 h-auto",children:"Reply"}),l===s.id&&e.jsxs("form",{onSubmit:c,className:"mt-2",children:[e.jsx(d,{placeholder:"Write a reply...",value:a.data.body,onChange:i=>a.setData("body",i.target.value)}),e.jsxs("div",{className:"mt-2 space-x-2",children:[e.jsx(t,{type:"submit",disabled:a.processing,children:"Send Reply"}),e.jsx(t,{type:"button",variant:"outline",onClick:()=>o(null),children:"Cancel"})]})]}),(u=s.replies)==null?void 0:u.map(i=>m(i,p+1))]},s.id)};return e.jsxs(h,{id:"comments",children:[e.jsx(j,{children:e.jsx(f,{children:"Comments"})}),e.jsxs(y,{children:[e.jsxs("form",{onSubmit:c,className:"mb-4",children:[e.jsx(d,{placeholder:"Write a comment...",value:a.data.body,onChange:s=>a.setData("body",s.target.value)}),e.jsx(t,{type:"submit",className:"mt-2",disabled:a.processing,children:"Send Comment"})]}),n.map(s=>m(s))]})]})}export{R as default};
